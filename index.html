<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìŠ¤ë§ˆì¼ ì í•‘</title>
  <style>
    /* CSSëŠ” â‘¡ì—ì„œ ì „ì²´ ìˆ˜ë¡ */
  </style>
</head>
<body>
  <h1>ìŠ¤ë§ˆì¼ ì í•‘ ğŸ•¹ï¸</h1>
  <div id="startScreen">
    <p>ìŠ¤í˜ì´ìŠ¤ë°”, í´ë¦­ ë˜ëŠ” í„°ì¹˜ë¡œ ì í”„/ì‹œì‘í•˜ì„¸ìš”!</p>
    <button id="startBtn">START !</button>
    <p id="lastScore">ìµœì¢… ì ìˆ˜: 0ì </p>
  </div>
  <div id="game">
    <div id="character"><img src="character.png" alt="ìºë¦­í„°"></div>
    <div id="scoreBoard">ì ìˆ˜: <span id="score">0</span></div>
    <div id="gameOverMessage">ê²Œì„ ì˜¤ë²„!</div>
  </div>

  <!-- ğŸ”Š ì‚¬ìš´ë“œ íŒŒì¼ë“¤ -->
  <audio id="startSound" src="start.mp3" preload="auto" loop></audio>
  <audio id="bgMusic" src="bgmusic.mp3" preload="auto" loop></audio>
  <audio id="gameOverSound" src="gameover.mp3" preload="auto"></audio>
  <audio id="jumpSound" src="jump.mp3" preload="auto"></audio>

  <script>
    /* JavaScriptëŠ” â‘¢ì—ì„œ ì „ì²´ ìˆ˜ë¡ */
  </script>
</body>
</html>






<style>
  body {
    text-align: center;
    background: url("st.png") no-repeat center/cover;
    margin: 0;
    user-select: none;       /* âœ… ì „ì²´ ì„ íƒ ë°©ì§€ */
    -webkit-user-drag: none; /* âœ… ì „ì²´ ë“œë˜ê·¸ ë°©ì§€ */
  }
  body.gameStarted { background: white !important; }

  #game {
    position: relative;
    width: 100%;
    max-width: 1200px;
    aspect-ratio: 2 / 1; /* âœ… í™”ë©´ ë¹„ìœ¨ ìœ ì§€ */
    margin: 20px auto;
    background: url("bg.png") no-repeat center/cover;
    border: 2px solid #333;
    overflow: hidden;
    display: none;
  }

  #character {
    position: absolute;
    bottom: 0;
    left: 20%;
    width: 8%;
    height: auto;
    transform: translateY(0);
  }
  #character img {
    width: 100%;
    height: auto;
    pointer-events: none;
  }

  .obstacle { position: absolute; left: 100%; }
  .obstacle img { width: 100%; height: 100%; }
  .move { animation: moveObstacle var(--speed, 2s) linear forwards; }

  @keyframes moveObstacle { from { left: 100%; } to { left: -10%; } }

  #startScreen { margin-top: 5vh; position: relative; }
  #startScreen p {
    font-size: 4vw; font-weight: bold; text-align: center;
    margin-bottom: 5vh;
  }
  #startScreen button {
    font-size: 6vw; color: white; padding: 2vh 4vw;
    cursor: pointer; font-weight: bold; background: green;
  }
  #lastScore {
    font-size: 5vw !important; margin-top: 5vh;
    color: red; font-weight: bold;
  }

  #scoreBoard {
    position: absolute;
    top: 1vh;
    left: 50%;
    transform: translateX(-50%);
    font-size: 3vw;
    font-weight: bold;
    color: black;
  }

  h1 { font-size: 8vw; font-weight: bold; color: gray; }

  #gameOverMessage {
    display: none;
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 6vw;
    font-weight: bold;
    color: red;
    background: rgba(255,255,255,0.8);
    padding: 2vh 4vw;
    border: 3px solid red;
    border-radius: 10px;
  }

  /* âœ… ë°ìŠ¤í¬í†± ì „ìš© */
  @media (min-width: 768px) {
    #game {
      height: 600px;
    }
    #character {
      width: 80px;
      height: 80px;
      left: 250px;
    }
    #scoreBoard { font-size: 24px; }
    h1 { font-size: 100px; }
    #startScreen p { font-size: 30px; }
    #startScreen button { font-size: 70px; }
    #lastScore { font-size: 50px !important; }
    #gameOverMessage { font-size: 60px; }
  }

  /* âœ… ëª¨ë°”ì¼ ì „ìš©: 700px ì´í•˜ */
  @media (max-width: 700px) {
    html, body {
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 100dvh;   /* ë™ì  ë·°í¬íŠ¸ ë†’ì´ */
      overflow: hidden; /* ìŠ¤í¬ë¡¤ ì œê±° */
    }

    h1 {
      display: none !important; /* ëª¨ë°”ì¼ì—ì„œëŠ” ê¸€ì ìˆ¨ê¹€ */
    }

    #game, #startScreen {
      position: fixed;   /* í™”ë©´ ì „ì²´ì— ê³ ì • */
      top: 0;
      left: 0;
      width: 100vw;
      height: 100dvh;    /* ì„¸ë¡œÂ·ê°€ë¡œ ëª¨ë‘ í™”ë©´ì— ë§ì¶¤ */
      margin: 0;
      border: none;
      max-width: none;
      aspect-ratio: auto;
    }

    #scoreBoard { font-size: 5vw; }
    #gameOverMessage { font-size: 8vw; }
  }
</style>







<script>
  const game = document.getElementById("game");
  const character = document.getElementById("character");
  const scoreDisplay = document.getElementById("score");
  const startScreen = document.getElementById("startScreen");
  const startBtn = document.getElementById("startBtn");
  const lastScoreDisplay = document.getElementById("lastScore");
  const gameOverMessage = document.getElementById("gameOverMessage");

  const jumpSound = document.getElementById("jumpSound");
  const startSound = document.getElementById("startSound");
  const bgMusic = document.getElementById("bgMusic");
  const gameOverSound = document.getElementById("gameOverSound");

  /* âœ… ì¶”ê°€ëœ ë²„íŠ¼ */
  const bigJumpBtn = document.getElementById("bigJumpBtn");
  const smallJumpBtn = document.getElementById("smallJumpBtn");

  let score = 0, isJumping = false, gameStarted = false;
  let jumpedForObstacle = false;
  let keyDownTime = 0;
  let clickTimer = null;
  let obstacleSpeed = 2;
  let minDelay = 1000, maxDelay = 1500;
  let obstacleTimers = [];
  let touchStartTime = 0; // âœ… í„°ì¹˜ ì‹œì‘ ì‹œê°„ ê¸°ë¡ìš©

  function safePlay(audio) {
    if (!audio) return;
    audio.currentTime = 0;
    let playPromise = audio.play();
    if (playPromise !== undefined) {
      playPromise.catch(err => console.log("ì˜¤ë””ì˜¤ ì¬ìƒ ì‹¤íŒ¨:", err));
    }
  }

  function jump(height) {
    if (isJumping) return;
    isJumping = true;
    jumpedForObstacle = true;
    safePlay(jumpSound);

    let start = null, goingUp = true;
    function animateJump(timestamp) {
      if (!start) start = timestamp;
      let elapsed = timestamp - start;
      if (goingUp) {
        let newBottom = Math.min(elapsed, height);
        character.style.bottom = newBottom + "px";
        if (newBottom >= height) { goingUp = false; start = timestamp; }
      } else {
        let newBottom = Math.max(height - elapsed, 0);
        character.style.bottom = newBottom + "px";
        if (newBottom <= 0) { isJumping = false; return; }
      }
      requestAnimationFrame(animateJump);
    }
    requestAnimationFrame(animateJump);
  }

  function smallJump() { jump(300); }
  function bigJump() { jump(450); }

  function startGame() {
    startScreen.style.display = "none";
    game.style.display = "block";
    document.body.classList.add("gameStarted");
    score = 0; scoreDisplay.textContent = score + "ì ";
    gameStarted = true;
    isJumping = false; jumpedForObstacle = false;
    obstacleSpeed = 2; minDelay = 1000; maxDelay = 1500;
    obstacleTimers.forEach(id => clearTimeout(id)); obstacleTimers = [];

    character.style.bottom = "0px";

    startSound.pause(); startSound.currentTime = 0;
    safePlay(bgMusic);
    spawnObstacle();
  }

  function spawnObstacle() {
    if (!gameStarted) return;
    const obstacle = document.createElement("div");
    obstacle.classList.add("obstacle", "move");
    obstacle.style.setProperty("--speed", obstacleSpeed + "s");
    obstacle.innerHTML = "<img src='cactus.png' alt='ì¥ì• ë¬¼'>";

    const randomSize = Math.floor(Math.random() * 130) + 70;
    obstacle.style.width = randomSize + "px";
    obstacle.style.height = randomSize + "px";
    const maxJumpHeight = 300;
    const randomBottom = Math.floor(Math.pow(Math.random(), 2) * (maxJumpHeight - 

140));
    obstacle.style.bottom = randomBottom + "px";

    game.appendChild(obstacle);

    const checkCollision = setInterval(() => {
      const characterRect = character.getBoundingClientRect();
      const obstacleRect = obstacle.getBoundingClientRect();
      const marginTop = 5, marginBottom = 2, marginLeft = 10, marginRight = 19;
      if (
        characterRect.left + marginLeft < obstacleRect.right - marginRight &&
        characterRect.right - marginRight > obstacleRect.left + marginLeft &&
        characterRect.top + marginTop < obstacleRect.bottom - marginBottom &&
        characterRect.bottom - marginBottom > obstacleRect.top + marginTop
      ) {
        gameOver();
        clearInterval(checkCollision);
        obstacle.style.animationPlayState = "paused";
      }
    }, 50);

    obstacle.addEventListener("animationend", () => {
      clearInterval(checkCollision);
      if (game.contains(obstacle) && gameStarted) {
        score += jumpedForObstacle ? 10 : 5;
        scoreDisplay.textContent = score + "ì ";
        jumpedForObstacle = false;

        if (score % 50 === 0) {
          if (obstacleSpeed > 0.5) obstacleSpeed -= 0.2;
          if (minDelay > 400) { minDelay -= 100; maxDelay -= 100; }
        }

        game.removeChild(obstacle);
      }
    });

    const randomDelay = Math.random() * maxDelay + minDelay;
    const timerId = setTimeout(() => { if (gameStarted) spawnObstacle(); }, randomDelay);
    obstacleTimers.push(timerId);
  }

  function gameOver() {
    gameStarted = false;
    gameOverMessage.style.display = "block";
    obstacleTimers.forEach(id => clearTimeout(id));
    obstacleTimers = [];
    bgMusic.pause(); safePlay(gameOverSound);

    gameOverSound.onended = () => {
      gameOverMessage.style.display = "none";
      game.style.display = "none";
      startScreen.style.display = "block";
      document.body.classList.remove("gameStarted");
      safePlay(startSound);
      lastScoreDisplay.textContent = "ìµœì¢… ì ìˆ˜: " + score + "ì ";
      score = 0; scoreDisplay.textContent = score + "ì ";
    };
  }

  /* ì´ë²¤íŠ¸ ì²˜ë¦¬ */
  startBtn.addEventListener("click", e => { e.stopPropagation(); startGame(); });

  document.addEventListener("keydown", e => {
    if (e.code === "Space") keyDownTime = Date.now();
  });

  document.addEventListener("keyup", e => {
    if (e.code === "Space") {
      const pressDuration = Date.now() - keyDownTime;
      if (gameStarted) {
        pressDuration < 140 ? smallJump() : bigJump();
      } else if (startScreen.style.display === "block") {
        startGame();
      }
    }
  });

  document.addEventListener("click", e => {
    if (e.target.id === "startBtn") return;
    if (gameStarted) {
      if (clickTimer) clearTimeout(clickTimer);
      clickTimer = setTimeout(() => { smallJump(); clickTimer = null; }, 200);
    } else if (startScreen.style.display === "block") {
      startGame();
    }
  });

  document.addEventListener("dblclick", e => {
    if (e.target.id === "startBtn") return;
    e.preventDefault();
    if (gameStarted) {
      if (clickTimer) { clearTimeout(clickTimer); clickTimer = null; }
      bigJump();
    } else if (startScreen.style.display === "block") {
      startGame();
    }
  });

  /* âœ… í„°ì¹˜ ì´ë²¤íŠ¸: íƒ­ì€ ì‘ì€ ì í”„, ë¡±í”„ë ˆìŠ¤ëŠ” í° ì í”„ */
  document.addEventListener("touchstart", e => {
    if (e.target.id === "bigJumpBtn" || e.target.id === "smallJumpBtn" || e.target.id === 

"startBtn") {
      return; // ë²„íŠ¼ í„°ì¹˜ëŠ” ê·¸ëŒ€ë¡œ í—ˆìš©
    }
    if (gameStarted) {
      touchStartTime = Date.now(); // í„°ì¹˜ ì‹œì‘ ì‹œê°„ ê¸°ë¡
      e.preventDefault();
      return;
    }
    if (startScreen.style.display === "block") {
      startGame();
    }
  });

  document.addEventListener("touchend", e => {
    if (!gameStarted) return;
    const touchDuration = Date.now() - touchStartTime;
    if (touchDuration < 170) {
      smallJump(); // âœ… ì§§ì€ í„°ì¹˜ â†’ ì‘ì€ ì í”„
    } else {
      bigJump();   // âœ… ê¸´ í„°ì¹˜ â†’ í° ì í”„
    }
  });

  /* âœ… ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²° */
  bigJumpBtn.addEventListener("click", () => { if (gameStarted) bigJump(); });
  smallJumpBtn.addEventListener("click", () => { if (gameStarted) smallJump(); });
  bigJumpBtn.addEventListener("touchstart", () => { if (gameStarted) bigJump(); });
  smallJumpBtn.addEventListener("touchstart", () => { if (gameStarted) smallJump(); });
</script>






